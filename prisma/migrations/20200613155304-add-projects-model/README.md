# Migration `20200613155304-add-projects-model`

This migration has been generated by Aravindh Sridharan at 6/13/2020, 3:53:04 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Project" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"description" text   ,"id" text  NOT NULL ,"name" text  NOT NULL ,"teamId" text  NOT NULL ,"updatedAt" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."_ProjectToRecord" (
"A" text  NOT NULL ,"B" text  NOT NULL )

ALTER TABLE "public"."Tag" ADD COLUMN "updatedAt" timestamp(3)  NOT NULL ;

CREATE UNIQUE INDEX "_ProjectToRecord_AB_unique" ON "public"."_ProjectToRecord"("A","B")

CREATE  INDEX "_ProjectToRecord_B_index" ON "public"."_ProjectToRecord"("B")

ALTER TABLE "public"."Project" ADD FOREIGN KEY ("teamId")REFERENCES "public"."Team"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_ProjectToRecord" ADD FOREIGN KEY ("A")REFERENCES "public"."Project"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_ProjectToRecord" ADD FOREIGN KEY ("B")REFERENCES "public"."Record"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200613114944-optional-team-description..20200613155304-add-projects-model
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -16,26 +16,37 @@
     updatedAt          DateTime             @updatedAt
     recordType         String
     timestamp          DateTime
     data               Json
-    tags                Tag[]                @relation(references: [id])
-    teams               Team[]              @relation(references: [id])
-
+    tags               Tag[]                @relation(references: [id])
+    teams              Team[]               @relation(references: [id])
+    projects           Project[]            @relation(references: [id])
 }
 model Team {
     id                 String               @id @default(uuid())
     createdAt          DateTime             @default(now())
     updatedAt          DateTime             @updatedAt
-    name                String
-    description         String?
-    records             Record[]            @relation(references: [id])
+    name               String
+    description        String?
+    records            Record[]             @relation(references: [id])
+    projects           Project[]            
 }
-
+model Project {
+    id                 String               @id @default(uuid())
+    createdAt          DateTime             @default(now())
+    updatedAt          DateTime             @updatedAt
+    name               String
+    description        String?
+    records            Record[]             @relation(references: [id])
+    team               Team                 @relation(fields: [teamId], references: [id])
+    teamId             String
+}
 model Tag {
-  id          String     @id @default(uuid())
-  createdAt   DateTime   @default(now())
-  name        String
-  description String?
-  records          Record[]   @relation(references: [id])
+  id                   String               @id @default(uuid())
+  createdAt            DateTime             @default(now())
+  updatedAt            DateTime             @updatedAt
+  name                 String
+  description          String?
+  records              Record[]             @relation(references: [id])
 }
```


